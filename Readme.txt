Что нужно сделать?

Подготовить стенд на Vagrant как минимум с одним сервером. На этом сервере используя Ansible необходимо развернуть nginx со следующими условиями:

необходимо использовать модуль yum/apt;
конфигурационные файлы должны быть взяты из шаблона jinja2 с перемененными;
после установки nginx должен быть в режиме enabled в systemd;
должен быть использован notify для старта nginx после установки;
сайт должен слушать на нестандартном порту - 8080, для этого использовать переменные в Ansible.

В чат ДЗ отправьте ссылку на ваш git-репозиторий. Обычно мы проверяем ДЗ в течение 48 часов.

Если возникнут вопросы, обращайтесь к студентам, преподавателям и наставникам в канал группы в Telegram.


Критерии оценки:
Статус "Принято" ставится, если:

предоставлен Vagrantfile и готовый playbook/роль (инструкция по запуску стенда, если посчитаете необходимым);
после запуска стенда nginx доступен на порту 8080;
при написании playbook/роли соблюдены перечисленные в задании условия.

#############################################################################

Выполнение задания.

1. Инициализируем роль.

root@docker1:/media/obmen/OTUS_ANSIBLE_ROLE_NGINX# ansible-galaxy init deploy_nginx_web
- Role deploy_nginx_web was created successfully


2. Создаем два шаблона 
root@docker1:/media/obmen/OTUS_ANSIBLE_ROLE_NGINX/deploy_nginx_web/templates# ls
index.html.j2  nginx.conf.j2

3. Прописываю vars в /deploy_nginx_web/defaults/main.yml

4. Прописываю handlers в /deploy_nginx_web/handlers/main.yml

5. Прописываю tasks в /deploy_nginx_web/tasks/main.yml

6. Прописываю роль в playbook.yml

7. Запуск
root@docker1:/media/obmen/OTUS_ANSIBLE_ROLE_NGINX# ansible-playbook -i hosts playbook.yml

PLAY [Configure webserver with Nginx and TLS] ***************************************************************************************************************************************************

TASK [Gathering Facts] **************************************************************************************************************************************************************************
ok: [192.168.0.28]

TASK [deploy_nginx_web : nginx is installed] ****************************************************************************************************************************************************
ok: [192.168.0.28]

TASK [deploy_nginx_web : Create directories for TLS certificates] *******************************************************************************************************************************
ok: [192.168.0.28]

TASK [deploy_nginx_web : nginx config template] *************************************************************************************************************************************************
ok: [192.168.0.28]

TASK [deploy_nginx_web : Enable configuration] **************************************************************************************************************************************************
ok: [192.168.0.28]

TASK [deploy_nginx_web : Install home page] *****************************************************************************************************************************************************
ok: [192.168.0.28]

TASK [deploy_nginx_web : Restart nginx] *********************************************************************************************************************************************************

PLAY RECAP **************************************************************************************************************************************************************************************
192.168.0.28               : ok=6    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0

root@docker1:/media/obmen/OTUS_ANSIBLE_ROLE_NGINX#



